{% extends "monitoreo/base.html" %}

{% block title %}Estad√≠sticas - Sistema de Monitoreo{% endblock %}
{% block page_title %}Dashboard de Estad√≠sticas y An√°lisis por Zonas{% endblock %}

{% block extra_css %}
<style>
    /* Estilos para estad√≠sticas */
    .stats-filters {
        background: white;
        padding: 1.5rem;
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        margin-bottom: 2rem;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
        align-items: end;
    }

    .filter-group {
        display: flex;
        flex-direction: column;
    }

    .filter-label {
        font-size: 0.85rem;
        font-weight: 600;
        color: var(--text-dark);
        margin-bottom: 0.5rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .form-input,
    .form-select {
        padding: 0.75rem;
        border: 1px solid var(--border-color);
        border-radius: 6px;
        font-size: 0.9rem;
        transition: all 0.3s ease;
    }

    .form-select {
        cursor: pointer;
        appearance: none;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%231e3a8a' d='M1 4l5 5 5-5'/%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: right 8px center;
        padding-right: 2rem;
    }

    .form-input:focus,
    .form-select:focus {
        outline: none;
        border-color: var(--secondary-color);
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }

    .action-btn {
        padding: 0.75rem 1.5rem;
        background: var(--secondary-color);
        color: white;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.3s ease;
        width: 100%;
    }

    .action-btn:hover {
        background: var(--primary-color);
        transform: translateY(-2px);
    }

    /* Tarjetas de resumen */
    .summary-cards {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
    }

    .summary-card {
        background: white;
        padding: 1.5rem;
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        border-top: 4px solid var(--secondary-color);
        text-align: center;
        transition: all 0.3s ease;
    }

    .summary-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
    }

    .summary-card.danger {
        border-top-color: var(--danger-color);
    }

    .summary-card.warning {
        border-top-color: var(--warning-color);
    }

    .summary-card.success {
        border-top-color: var(--success-color);
    }

    .card-value {
        font-size: 2.5rem;
        font-weight: 700;
        color: var(--primary-color);
        margin-bottom: 0.5rem;
    }

    .card-label {
        font-size: 0.9rem;
        text-transform: uppercase;
        color: var(--text-light);
        letter-spacing: 0.5px;
        margin-bottom: 0.75rem;
    }

    .card-trend {
        font-size: 0.85rem;
        color: var(--success-color);
        font-weight: 600;
    }

    .card-trend.negative {
        color: var(--danger-color);
    }

    /* Secci√≥n de gr√°ficos */
    .charts-section {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
        gap: 2rem;
        margin-bottom: 2rem;
    }

    .chart-card {
        background: white;
        padding: 1.5rem;
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .chart-title {
        font-size: 1.25rem;
        font-weight: 600;
        color: var(--primary-color);
        margin-bottom: 1.5rem;
        padding-bottom: 1rem;
        border-bottom: 2px solid var(--border-color);
    }

    /* Gr√°fico de barras simulado */
    .bar-chart {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .bar-item {
        display: flex;
        align-items: center;
        gap: 1rem;
    }

    .bar-label {
        min-width: 120px;
        font-weight: 500;
        color: var(--text-dark);
        font-size: 0.9rem;
    }

    .bar-container {
        flex: 1;
        height: 30px;
        background: var(--light-bg);
        border-radius: 4px;
        overflow: hidden;
        position: relative;
    }

    .bar-fill {
        height: 100%;
        background: linear-gradient(90deg, var(--secondary-color) 0%, var(--primary-color) 100%);
        display: flex;
        align-items: center;
        justify-content: flex-end;
        padding-right: 0.5rem;
        color: white;
        font-size: 0.75rem;
        font-weight: 700;
    }

    .bar-fill.danger {
        background: linear-gradient(90deg, var(--danger-color) 0%, #b91c1c 100%);
    }

    .bar-fill.warning {
        background: linear-gradient(90deg, var(--warning-color) 0%, #d97706 100%);
    }

    .bar-fill.success {
        background: linear-gradient(90deg, var(--success-color) 0%, #059669 100%);
    }

    .bar-value {
        min-width: 60px;
        text-align: right;
        font-weight: 700;
        color: var(--primary-color);
        font-size: 0.95rem;
    }

    /* Mapa de ubicaciones (RF-04) */
    .map-container {
        background: white;
        padding: 1.5rem;
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        margin-bottom: 2rem;
    }

    .map-title {
        font-size: 1.25rem;
        font-weight: 600;
        color: var(--primary-color);
        margin-bottom: 1.5rem;
        padding-bottom: 1rem;
        border-bottom: 2px solid var(--border-color);
    }

    .map-simulation {
        width: 100%;
        height: 400px;
        background: linear-gradient(135deg, #e0e7ff 0%, #f3f4f6 100%);
        border: 2px solid var(--border-color);
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 1.5rem;
        position: relative;
        overflow: hidden;
    }

    .map-grid {
        position: absolute;
        width: 100%;
        height: 100%;
        background-image: 
            linear-gradient(rgba(59, 130, 246, 0.1) 1px, transparent 1px),
            linear-gradient(90deg, rgba(59, 130, 246, 0.1) 1px, transparent 1px);
        background-size: 50px 50px;
    }

    .map-marker {
        position: absolute;
        width: 35px;
        height: 35px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.2rem;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    }

    .map-marker:hover {
        transform: scale(1.2);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }

    .map-marker.high-risk {
        background: var(--danger-color);
        animation: pulse 2s infinite;
    }

    .map-marker.medium-risk {
        background: var(--warning-color);
    }

    .map-marker.low-risk {
        background: var(--success-color);
    }

    .map-marker-label {
        position: absolute;
        bottom: -25px;
        background: var(--primary-color);
        color: white;
        padding: 0.35rem 0.75rem;
        border-radius: 4px;
        font-size: 0.75rem;
        font-weight: 600;
        white-space: nowrap;
        opacity: 0;
        transition: all 0.3s ease;
    }

    .map-marker:hover .map-marker-label {
        opacity: 1;
        bottom: -35px;
    }

    @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.5; }
    }

    /* Leyenda del mapa */
    .map-legend {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 1rem;
    }

    .legend-item {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        font-size: 0.9rem;
    }

    .legend-color {
        width: 20px;
        height: 20px;
        border-radius: 50%;
    }

    /* Tabla de zonas con estad√≠sticas (RF-06) */
    .zones-table-container {
        background: white;
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        margin-bottom: 2rem;
        overflow: hidden;
    }

    .table-header {
        padding: 1.5rem;
        background: var(--light-bg);
        border-bottom: 2px solid var(--border-color);
    }

    .table-title {
        font-size: 1.25rem;
        font-weight: 600;
        color: var(--primary-color);
    }

    .table-wrapper {
        overflow-x: auto;
    }

    table {
        width: 100%;
        border-collapse: collapse;
    }

    thead {
        background: var(--light-bg);
        border-bottom: 2px solid var(--border-color);
    }

    th {
        padding: 1rem;
        text-align: left;
        font-weight: 600;
        color: var(--text-dark);
        font-size: 0.9rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    td {
        padding: 1rem;
        border-bottom: 1px solid var(--border-color);
        font-size: 0.9rem;
    }

    tbody tr:hover {
        background: rgba(59, 130, 246, 0.05);
    }

    /* Badges para zonas */
    .zone-badge {
        display: inline-block;
        padding: 0.35rem 0.75rem;
        border-radius: 6px;
        font-size: 0.8rem;
        font-weight: 600;
        text-transform: uppercase;
    }

    .badge-high {
        background: rgba(220, 38, 38, 0.1);
        color: var(--danger-color);
    }

    .badge-medium {
        background: rgba(245, 158, 11, 0.1);
        color: var(--warning-color);
    }

    .badge-low {
        background: rgba(16, 185, 129, 0.1);
        color: var(--success-color);
    }

    /* Tendencia */
    .trend-indicator {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.9rem;
        font-weight: 600;
    }

    .trend-up {
        color: var(--danger-color);
    }

    .trend-down {
        color: var(--success-color);
    }

    .trend-stable {
        color: var(--text-light);
    }

    /* Porcentaje visual */
    .percentage-bar {
        width: 100%;
        height: 6px;
        background: var(--border-color);
        border-radius: 3px;
        overflow: hidden;
        margin-top: 0.5rem;
    }

    .percentage-fill {
        height: 100%;
        background: linear-gradient(90deg, var(--secondary-color) 0%, var(--primary-color) 100%);
    }

    /* Pie chart simulado */
    .pie-chart {
        width: 250px;
        height: 250px;
        border-radius: 50%;
        background: conic-gradient(
            var(--danger-color) 0deg 129.6deg,
            var(--warning-color) 129.6deg 237.6deg,
            var(--success-color) 237.6deg 360deg
        );
        margin: 1rem auto;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .pie-legend {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        gap: 1rem;
        text-align: center;
        margin-top: 1.5rem;
    }

    .pie-item {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        font-size: 0.85rem;
    }

    .pie-color {
        width: 12px;
        height: 12px;
        border-radius: 2px;
    }

    /* Responsividad */
    @media (max-width: 1024px) {
        .charts-section {
            grid-template-columns: 1fr;
        }

        .map-simulation {
            height: 300px;
        }
    }

    @media (max-width: 768px) {
        .stats-filters {
            grid-template-columns: 1fr 1fr;
        }

        .summary-cards {
            grid-template-columns: 1fr 1fr;
        }

        .map-legend {
            grid-template-columns: 1fr;
        }

        table {
            font-size: 0.8rem;
        }

        th, td {
            padding: 0.75rem;
        }
    }

    @media (max-width: 480px) {
        .summary-cards {
            grid-template-columns: 1fr;
        }

        .card-value {
            font-size: 1.75rem;
        }

        .map-simulation {
            height: 250px;
        }

        .pie-chart {
            width: 200px;
            height: 200px;
        }
    }

    /* Grid de fondo */
    .insights-section {
        background: white;
        padding: 1.5rem;
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        margin-bottom: 2rem;
    }

    .insights-title {
        font-size: 1.25rem;
        font-weight: 600;
        color: var(--primary-color);
        margin-bottom: 1.5rem;
        padding-bottom: 1rem;
        border-bottom: 2px solid var(--border-color);
    }

    .insights-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 1.5rem;
    }

    .insight-item {
        padding: 1rem;
        background: var(--light-bg);
        border-left: 4px solid var(--secondary-color);
        border-radius: 6px;
    }

    .insight-item.critical {
        border-left-color: var(--danger-color);
    }

    .insight-item.warning {
        border-left-color: var(--warning-color);
    }

    .insight-title {
        font-weight: 600;
        color: var(--text-dark);
        margin-bottom: 0.5rem;
    }

    .insight-description {
        font-size: 0.9rem;
        color: var(--text-dark);
    }
</style>
{% endblock %}

{% block content %}
<div class="animate-fade">
    <!-- Filtros para estad√≠sticas -->
    <div class="stats-filters">
        <div class="filter-group">
            <label class="filter-label">üìÖ Rango de Fechas</label>
            <select class="form-select" id="dateRange">
                <option value="today">Hoy</option>
                <option value="week">Esta semana</option>
                <option value="month" selected>Este mes</option>
                <option value="year">Este a√±o</option>
            </select>
        </div>

        <div class="filter-group">
            <label class="filter-label">üìç Zona</label>
            <select class="form-select" id="zoneFilter">
                <option value="">Todas las zonas</option>
                <option value="centro">Centro Urbano</option>
                <option value="comercial">Zona Comercial</option>
                <option value="publica">Zona P√∫blica</option>
                <option value="vehiculos">Zona de Veh√≠culos</option>
                <option value="restringida">√Årea Restringida</option>
            </select>
        </div>

        <div class="filter-group">
            <label class="filter-label">üìä Tipo de An√°lisis</label>
            <select class="form-select" id="analysisType">
                <option value="all">Todos los eventos</option>
                <option value="suspicious">Solo sospechosos</option>
                <option value="normal">Solo normales</option>
            </select>
        </div>

        <button class="action-btn" onclick="applyFilters()">
            üìä Actualizar An√°lisis
        </button>
    </div>

    <!-- Resumen de estad√≠sticas principales -->
    <div class="summary-cards">
        <div class="summary-card">
            <div class="card-value">325</div>
            <div class="card-label">Total Eventos (Mes)</div>
            <div class="card-trend">‚Üë 15% respecto a mes anterior</div>
        </div>

        <div class="summary-card danger">
            <div class="card-value">45</div>
            <div class="card-label">Eventos Sospechosos</div>
            <div class="card-trend negative">‚Üë 23% respecto a mes anterior</div>
        </div>

        <div class="summary-card warning">
            <div class="card-value">8</div>
            <div class="card-label">Zona de Mayor Riesgo</div>
            <div class="card-trend">Centro Urbano</div>
        </div>

        <div class="summary-card success">
            <div class="card-value">94%</div>
            <div class="card-label">Tasa de Resoluci√≥n</div>
            <div class="card-trend">‚Üë 3% respecto a mes anterior</div>
        </div>
    </div>

    <!-- SECCI√ìN DE GR√ÅFICOS -->
    <div class="charts-section">
        <!-- Gr√°fico de eventos por zona (RF-06) -->
        <div class="chart-card">
            <div class="chart-title">üìä Eventos por Zona</div>
            <div class="bar-chart">
                <div class="bar-item">
                    <div class="bar-label">Centro Urbano</div>
                    <div class="bar-container">
                        <div class="bar-fill danger" style="width: 85%;">85</div>
                    </div>
                    <div class="bar-value">85 eventos</div>
                </div>

                <div class="bar-item">
                    <div class="bar-label">Zona Comercial</div>
                    <div class="bar-container">
                        <div class="bar-fill" style="width: 62%;">62</div>
                    </div>
                    <div class="bar-value">62 eventos</div>
                </div>

                <div class="bar-item">
                    <div class="bar-label">Zona de Veh√≠culos</div>
                    <div class="bar-container">
                        <div class="bar-fill warning" style="width: 58%;">58</div>
                    </div>
                    <div class="bar-value">58 eventos</div>
                </div>

                <div class="bar-item">
                    <div class="bar-label">Zona P√∫blica</div>
                    <div class="bar-container">
                        <div class="bar-fill" style="width: 45%;">45</div>
                    </div>
                    <div class="bar-value">45 eventos</div>
                </div>

                <div class="bar-item">
                    <div class="bar-label">√Årea Restringida</div>
                    <div class="bar-container">
                        <div class="bar-fill danger" style="width: 35%;">35</div>
                    </div>
                    <div class="bar-value">35 eventos</div>
                </div>
            </div>
        </div>

        <!-- Gr√°fico de distribuci√≥n de severidad -->
        <div class="chart-card">
            <div class="chart-title">üéØ Distribuci√≥n de Severidad</div>
            <div style="text-align: center;">
                <div class="pie-chart"></div>
                <div class="pie-legend">
                    <div class="pie-item">
                        <div class="pie-color" style="background: var(--danger-color);"></div>
                        <span>Cr√≠tica (36%)</span>
                    </div>
                    <div class="pie-item">
                        <div class="pie-color" style="background: var(--warning-color);"></div>
                        <span>Alta (33%)</span>
                    </div>
                    <div class="pie-item">
                        <div class="pie-color" style="background: var(--success-color);"></div>
                        <span>Normal (31%)</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- SECCI√ìN DE UBICACI√ìN DE INCIDENTES (RF-04) -->
    <div class="map-container">
        <div class="map-title">
            üìç Mapa de Ubicaci√≥n de Incidentes
        </div>

        <!-- Simulaci√≥n de mapa -->
        <div class="map-simulation">
            <div class="map-grid"></div>

            <!-- Marcadores de zonas con incidentes -->
            <!-- Centro Urbano - Alto riesgo -->
            <div class="map-marker high-risk" style="top: 25%; left: 35%;" onclick="viewZoneDetails('centro')">
                üìç
                <div class="map-marker-label">Centro (85 eventos)</div>
            </div>

            <!-- Zona Comercial - Riesgo medio -->
            <div class="map-marker medium-risk" style="top: 50%; left: 70%;" onclick="viewZoneDetails('comercial')">
                üìç
                <div class="map-marker-label">Comercial (62)</div>
            </div>

            <!-- Zona de Veh√≠culos - Riesgo medio -->
            <div class="map-marker medium-risk" style="top: 70%; left: 45%;" onclick="viewZoneDetails('vehiculos')">
                üìç
                <div class="map-marker-label">Veh√≠culos (58)</div>
            </div>

            <!-- Zona P√∫blica - Bajo riesgo -->
            <div class="map-marker low-risk" style="top: 40%; left: 20%;" onclick="viewZoneDetails('publica')">
                üìç
                <div class="map-marker-label">P√∫blica (45)</div>
            </div>

            <!-- √Årea Restringida - Alto riesgo -->
            <div class="map-marker high-risk" style="top: 15%; left: 75%;" onclick="viewZoneDetails('restringida')">
                üìç
                <div class="map-marker-label">Restringida (35)</div>
            </div>
        </div>

        <!-- Leyenda del mapa -->
        <div class="map-legend">
            <div class="legend-item">
                <div class="legend-color" style="background: var(--danger-color);"></div>
                <span>Alto Riesgo (>70 eventos)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: var(--warning-color);"></div>
                <span>Riesgo Medio (40-70)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: var(--success-color);"></div>
                <span>Bajo Riesgo (<40)</span>
            </div>
        </div>
    </div>

    <!-- TABLA DE ESTAD√çSTICAS POR ZONA (RF-06) -->
    <div class="zones-table-container">
        <div class="table-header">
            <div class="table-title">üìä Estad√≠sticas Detalladas por Zona</div>
        </div>

        <div class="table-wrapper">
            <table>
                <thead>
                    <tr>
                        <th>üìç Zona</th>
                        <th>Total Eventos</th>
                        <th>Sospechosos</th>
                        <th>Normales</th>
                        <th>Nivel de Riesgo</th>
                        <th>Tendencia</th>
                        <th>Distribuci√≥n</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Centro Urbano -->
                    <tr>
                        <td><strong>Centro Urbano</strong></td>
                        <td>85</td>
                        <td><strong style="color: var(--danger-color);">32</strong></td>
                        <td><strong style="color: var(--success-color);">53</strong></td>
                        <td>
                            <span class="zone-badge badge-high">Cr√≠tico</span>
                        </td>
                        <td>
                            <span class="trend-indicator trend-up">
                                ‚Üë +18%
                            </span>
                        </td>
                        <td>
                            <div class="percentage-bar">
                                <div class="percentage-fill" style="width: 100%;"></div>
                            </div>
                        </td>
                    </tr>

                    <!-- Zona Comercial -->
                    <tr>
                        <td><strong>Zona Comercial</strong></td>
                        <td>62</td>
                        <td><strong style="color: var(--danger-color);">18</strong></td>
                        <td><strong style="color: var(--success-color);">44</strong></td>
                        <td>
                            <span class="zone-badge badge-medium">Alto</span>
                        </td>
                        <td>
                            <span class="trend-indicator trend-up">
                                ‚Üë +12%
                            </span>
                        </td>
                        <td>
                            <div class="percentage-bar">
                                <div class="percentage-fill" style="width: 73%;"></div>
                            </div>
                        </td>
                    </tr>

                    <!-- Zona de Veh√≠culos -->
                    <tr>
                        <td><strong>Zona de Veh√≠culos</strong></td>
                        <td>58</td>
                        <td><strong style="color: var(--danger-color);">22</strong></td>
                        <td><strong style="color: var(--success-color);">36</strong></td>
                        <td>
                            <span class="zone-badge badge-medium">Medio</span>
                        </td>
                        <td>
                            <span class="trend-indicator trend-up">
                                ‚Üë +9%
                            </span>
                        </td>
                        <td>
                            <div class="percentage-bar">
                                <div class="percentage-fill" style="width: 68%;"></div>
                            </div>
                        </td>
                    </tr>

                    <!-- Zona P√∫blica -->
                    <tr>
                        <td><strong>Zona P√∫blica</strong></td>
                        <td>45</td>
                        <td><strong style="color: var(--danger-color);">8</strong></td>
                        <td><strong style="color: var(--success-color);">37</strong></td>
                        <td>
                            <span class="zone-badge badge-low">Bajo</span>
                        </td>
                        <td>
                            <span class="trend-indicator trend-stable">
                                ‚Üí -2%
                            </span>
                        </td>
                        <td>
                            <div class="percentage-bar">
                                <div class="percentage-fill" style="width: 53%;"></div>
                            </div>
                        </td>
                    </tr>

                    <!-- √Årea Restringida -->
                    <tr>
                        <td><strong>√Årea Restringida</strong></td>
                        <td>35</td>
                        <td><strong style="color: var(--danger-color);">15</strong></td>
                        <td><strong style="color: var(--success-color);">20</strong></td>
                        <td>
                            <span class="zone-badge badge-high">Cr√≠tico</span>
                        </td>
                        <td>
                            <span class="trend-indicator trend-up">
                                ‚Üë +25%
                            </span>
                        </td>
                        <td>
                            <div class="percentage-bar">
                                <div class="percentage-fill" style="width: 41%;"></div>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- SECCI√ìN DE INSIGHTS Y RECOMENDACIONES -->
    <div class="insights-section">
        <div class="insights-title">üí° Insights y Recomendaciones</div>
        <div class="insights-grid">
            <div class="insight-item critical">
                <div class="insight-title">‚ö†Ô∏è Centro Urbano requiere atenci√≥n</div>
                <div class="insight-description">
                    La zona Centro Urbano registra el mayor n√∫mero de eventos sospechosos (32). Se recomienda incrementar patrullaje y vigilancia en esta √°rea.
                </div>
            </div>

            <div class="insight-item warning">
                <div class="insight-title">üìà Tendencia al alza en √Årea Restringida</div>
                <div class="insight-description">
                    La √Årea Restringida muestra un aumento del 25% en incidentes. Implementar medidas de seguridad adicionales.
                </div>
            </div>

            <div class="insight-item">
                <div class="insight-title">‚úì Zona P√∫blica bajo control</div>
                <div class="insight-description">
                    La Zona P√∫blica muestra la tendencia m√°s favorable con solo 8 eventos sospechosos. Continuar con estrategia actual.
                </div>
            </div>

            <div class="insight-item critical">
                <div class="insight-title">üöó Incremento en robos de veh√≠culos</div>
                <div class="insight-description">
                    La Zona de Veh√≠culos registra 22 eventos sospechosos. Considerar sistemas de seguridad adicionales (iluminaci√≥n, vigilancia).
                </div>
            </div>

            <div class="insight-item warning">
                <div class="insight-title">üìä Eficiencia de detecci√≥n</div>
                <div class="insight-description">
                    El sistema detecta el 37.8% de eventos como potencialmente sospechosos. Tasa consistente con par√°metros esperados.
                </div>
            </div>

            <div class="insight-item">
                <div class="insight-title">üìÖ An√°lisis temporal</div>
                <div class="insight-description">
                    Se recomienda realizar an√°lisis nocturno/diurno para identificar patrones espec√≠ficos de horarios de mayor incidencia.
                </div>
            </div>
        </div>
    </div>
</div>

<!-- JavaScript -->
<script>
    /**
     * RF-06: Visualizar estad√≠sticas por zonas
     * RF-04: Mostrar ubicaci√≥n del incidente (mediante mapa)
     */

    const zoneDetails = {
        centro: {
            nombre: 'Centro Urbano',
            eventos: 85,
            sospechosos: 32,
            riesgo: 'Cr√≠tico',
            descripcion: 'Zona de alto tr√°nsito con mayor concentraci√≥n de personas y veh√≠culos. Mayor n√∫mero de incidentes registrados.'
        },
        comercial: {
            nombre: 'Zona Comercial',
            eventos: 62,
            sospechosos: 18,
            riesgo: 'Alto',
            descripcion: '√Årea con establecimientos comerciales. Riesgo moderado de eventos sospechosos.'
        },
        publica: {
            nombre: 'Zona P√∫blica',
            eventos: 45,
            sospechosos: 8,
            riesgo: 'Bajo',
            descripcion: '√Årea con espacios verdes y zonas recreativas. Baja incidencia de eventos an√≥malos.'
        },
        vehiculos: {
            nombre: 'Zona de Veh√≠culos',
            eventos: 58,
            sospechosos: 22,
            riesgo: 'Medio-Alto',
            descripcion: 'Estacionamientos y √°reas de circulaci√≥n vehicular. Riesgo moderado de actividades delictivas.'
        },
        restringida: {
            nombre: '√Årea Restringida',
            eventos: 35,
            sospechosos: 15,
            riesgo: 'Cr√≠tico',
            descripcion: 'Zona de acceso controlado. Cualquier evento es considerado de alto riesgo.'
        }
    };

    /**
     * RF-04: Mostrar ubicaci√≥n del incidente
     */
    function viewZoneDetails(zone) {
        const details = zoneDetails[zone];
        alert(
            `üìç ${details.nombre}\n\n` +
            `Total Eventos: ${details.eventos}\n` +
            `Eventos Sospechosos: ${details.sospechosos}\n` +
            `Nivel de Riesgo: ${details.riesgo}\n\n` +
            `Descripci√≥n:\n${details.descripcion}`
        );
    }

    /**
     * RF-06: Aplicar filtros a estad√≠sticas
     */
    function applyFilters() {
        const dateRange = document.getElementById('dateRange').value;
        const zone = document.getElementById('zoneFilter').value;
        const analysisType = document.getElementById('analysisType').value;

        console.log(`Filtros aplicados - Per√≠odo: ${dateRange}, Zona: ${zone || 'Todas'}, An√°lisis: ${analysisType}`);
        alert(
            `üìä An√°lisis actualizado\n\n` +
            `Per√≠odo: ${dateRange}\n` +
            `Zona: ${zone || 'Todas las zonas'}\n` +
            `Tipo: ${analysisType}\n\n` +
            `Datos actualizados correctamente.`
        );
    }

    // Inicializar
    document.addEventListener('DOMContentLoaded', function() {
        console.log('Dashboard de Estad√≠sticas inicializado');
        console.log('RF-06: Visualizar estad√≠sticas por zonas - Dashboard activo');
        console.log('RF-04: Mostrar ubicaci√≥n de incidente - Mapa de ubicaciones activo');
        updateNotificationBadge(5);
    });
</script>
{% endblock %}
